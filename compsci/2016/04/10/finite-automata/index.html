<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Finite Automata</title>
    <meta name="description" content="A web log. Mostly about computer science-y stuff. 
">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="https://blog.jeffsmits.net/compsci/2016/04/10/finite-automata/">
    
    <link rel="stylesheet" type="text/css" href="/css/katex.min.css">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Whatever</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Finite Automata</h1>
    <p class="post-meta">Apr 10, 2016</p>
  </header>

  <article class="post-content">
    <p><a href="#addendum"><em>Edited on: Apr 17, 2016</em></a></p>

<p>What do Turing machines and regular expressions have in common? One is a theoretical model of a computer, and can be used to prove that some things cannot be computed. The other is a practical tool for matching strings. And yet they are both based on a simple <em>computational model</em>: a (very constrained) finite state machine (FSM).</p>

<p>In this blog post we’ll go over the basics of this type of FSM and instead of going over proofs, we’ll go over examples and little implementations in Rust. For more information about this blog post series, see <a href="/compsci/2016/03/28/theory-of-computation/">this announcement post</a>.</p>

<h1 id="an-exercise-in-minimalism">An exercise in minimalism</h1>

<p>We’ll start with the simplest, most restricted version of our FSMs. These are great for proofs because everything explicitly defined and super simple. But they are not so great to construct by hand, so we’ll discuss a nicer version afterwards and relate <em>that one</em> to regular expressions. Turing machine will not be part of this post.</p>

<h2 id="deterministic-finite-automaton-dfa">Deterministic Finite Automaton (DFA)</h2>

<p>DFAs are FSMs (<em>automata</em>) that work on a <em>finite</em> input and give a boolean output. <em>True</em> means the input was recognised as part of the ‘language’ that the DFA encodes, <em>false</em> means it is not part of the language. <em>Deterministic</em> automata define all their (<em>finite</em> amount of) states and <em>exactly one</em> transition for every possible pair of state and input.<br />
The way you formally describe a DFA is by defining:</p>

<ol>
  <li>the allowable input symbols (or <em>alphabet</em> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Σ</mi></mrow><annotation encoding="application/x-tex">\Sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Σ</span></span></span></span>),</li>
  <li>the <em>states</em> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span></span></span></span>,</li>
  <li>the <em>state transitions</em> (as a finite mapping <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>),</li>
  <li>the <em>start state</em> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">q_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and</li>
  <li>the <em>final</em> or <em>accept states</em> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>.</li>
</ol>

<h3 id="example-binary-string">Example: Binary string</h3>

<p>Let’s construct a DFA that can recognise inputs that start with a one, has at least two zeroes after that, and then at least one more one, after which the ‘word’ ends.</p>

<div class="graphviz-wrapper">

<!-- Generated by graphviz version 10.0.1 (0)
 -->
<!-- Title: Binary string DFA Pages: 1 -->
<svg role="img" aria-label="Binary string DFA" width="398pt" height="79pt" viewBox="0.00 0.00 397.52 79.30">
<title>Binary string DFA</title>
<desc>digraph &quot;Binary string DFA&quot; { 
bgcolor=&quot;transparent&quot;;
rankdir=LR;
node [shape=circle, fixedsize=shape, width=0.5];
start [shape=none, label=&quot;&quot;, width=0];
q4 [shape=doublecircle, width=0.4];
start -&gt; q0;
q0 -&gt; q1 [label=&quot;1&quot;];
q1 -&gt; q2 [label=&quot;0&quot;];
q2 -&gt; q3 [label=&quot;0&quot;];
q3 -&gt; q3 [label=&quot;0&quot;];
q3 -&gt; q4 [label=&quot;1&quot;];
q4 -&gt; q4 [label=&quot;1&quot;];
 }</desc>

<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 75.3)">
<title>Binary string DFA</title>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
</g>
<!-- q0 -->
<g id="node3" class="node">
<title>q0</title>
<ellipse fill="none" stroke="black" cx="55.72" cy="-18.4" rx="18" ry="18" />
<text text-anchor="middle" x="55.72" y="-13.35" font-family="Times,serif" font-size="14.00">q0</text>
</g>
<!-- start&#45;&gt;q0 -->
<g id="edge1" class="edge">
<title>start&#45;&gt;q0</title>
<path fill="none" stroke="black" d="M18.1,-18.4C20.76,-18.4 23.55,-18.4 26.37,-18.4" />
<polygon fill="black" stroke="black" points="26.22,-21.9 36.22,-18.4 26.22,-14.9 26.22,-21.9" />
</g>
<!-- q4 -->
<g id="node2" class="node">
<title>q4</title>
<ellipse fill="none" stroke="black" cx="371.12" cy="-18.4" rx="14.4" ry="14.4" />
<ellipse fill="none" stroke="black" cx="371.12" cy="-18.4" rx="18.4" ry="18.4" />
<text text-anchor="middle" x="371.12" y="-13.35" font-family="Times,serif" font-size="14.00">q4</text>
</g>
<!-- q4&#45;&gt;q4 -->
<g id="edge7" class="edge">
<title>q4&#45;&gt;q4</title>
<path fill="none" stroke="black" d="M364.13,-35.25C362.57,-45.32 364.91,-54.8 371.12,-54.8 374.81,-54.8 377.13,-51.46 378.08,-46.63" />
<polygon fill="black" stroke="black" points="381.58,-46.77 378.11,-36.76 374.58,-46.75 381.58,-46.77" />
<text text-anchor="middle" x="371.12" y="-58" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- q1 -->
<g id="node4" class="node">
<title>q1</title>
<ellipse fill="none" stroke="black" cx="134.47" cy="-18.4" rx="18" ry="18" />
<text text-anchor="middle" x="134.47" y="-13.35" font-family="Times,serif" font-size="14.00">q1</text>
</g>
<!-- q0&#45;&gt;q1 -->
<g id="edge2" class="edge">
<title>q0&#45;&gt;q1</title>
<path fill="none" stroke="black" d="M73.37,-18.4C82.66,-18.4 94.48,-18.4 105.18,-18.4" />
<polygon fill="black" stroke="black" points="105.07,-21.9 115.07,-18.4 105.07,-14.9 105.07,-21.9" />
<text text-anchor="middle" x="95.1" y="-21.6" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- q2 -->
<g id="node5" class="node">
<title>q2</title>
<ellipse fill="none" stroke="black" cx="213.22" cy="-18.4" rx="18" ry="18" />
<text text-anchor="middle" x="213.22" y="-13.35" font-family="Times,serif" font-size="14.00">q2</text>
</g>
<!-- q1&#45;&gt;q2 -->
<g id="edge3" class="edge">
<title>q1&#45;&gt;q2</title>
<path fill="none" stroke="black" d="M152.12,-18.4C161.41,-18.4 173.23,-18.4 183.93,-18.4" />
<polygon fill="black" stroke="black" points="183.82,-21.9 193.82,-18.4 183.82,-14.9 183.82,-21.9" />
<text text-anchor="middle" x="173.85" y="-21.6" font-family="Times,serif" font-size="14.00">0</text>
</g>
<!-- q3 -->
<g id="node6" class="node">
<title>q3</title>
<ellipse fill="none" stroke="black" cx="291.97" cy="-18.4" rx="18" ry="18" />
<text text-anchor="middle" x="291.97" y="-13.35" font-family="Times,serif" font-size="14.00">q3</text>
</g>
<!-- q2&#45;&gt;q3 -->
<g id="edge4" class="edge">
<title>q2&#45;&gt;q3</title>
<path fill="none" stroke="black" d="M230.87,-18.4C240.16,-18.4 251.98,-18.4 262.68,-18.4" />
<polygon fill="black" stroke="black" points="262.57,-21.9 272.57,-18.4 262.57,-14.9 262.57,-21.9" />
<text text-anchor="middle" x="252.6" y="-21.6" font-family="Times,serif" font-size="14.00">0</text>
</g>
<!-- q3&#45;&gt;q4 -->
<g id="edge6" class="edge">
<title>q3&#45;&gt;q4</title>
<path fill="none" stroke="black" d="M309.71,-18.4C318.98,-18.4 330.77,-18.4 341.46,-18.4" />
<polygon fill="black" stroke="black" points="341.36,-21.9 351.36,-18.4 341.36,-14.9 341.36,-21.9" />
<text text-anchor="middle" x="331.35" y="-21.6" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- q3&#45;&gt;q3 -->
<g id="edge5" class="edge">
<title>q3&#45;&gt;q3</title>
<path fill="none" stroke="black" d="M285.11,-34.69C283.45,-44.79 285.74,-54.4 291.97,-54.4 295.67,-54.4 297.98,-51.01 298.9,-46.14" />
<polygon fill="black" stroke="black" points="302.4,-46.18 298.84,-36.2 295.4,-46.22 302.4,-46.18" />
<text text-anchor="middle" x="291.97" y="-57.6" font-family="Times,serif" font-size="14.00">0</text>
</g>
</g>
</svg>
</div>

<p>Note that I’ve already started cheating with the construction of this DFA. Not every state handles all symbols in the alphabet (0 and 1). This partially defined DFA is usually easier to write and read. The usual way to make it fully defined is to add an explicit <em>stuck state</em>. All the unhandled symbols go to that state, and with any next input the DFA will stay in that state.</p>

<h3 id="code-code-code">Code code code</h3>

<p>In Rust we can do the partial definition of the DFA with an <code class="language-plaintext highlighter-rouge">Option</code> type:</p>

<div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="n">State</span> <span class="o">=</span> <span class="nb">u8</span><span class="p">;</span>

<span class="k">type</span> <span class="n">Input</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">;</span>
<span class="k">const</span> <span class="n">ZERO</span><span class="p">:</span> <span class="n">Input</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="k">const</span> <span class="n">ONE</span><span class="p">:</span> <span class="n">Input</span>  <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">transition</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">,</span> <span class="n">symbol</span><span class="p">:</span> <span class="n">Input</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">match</span> <span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">symbol</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ONE</span><span class="p">)</span>  <span class="k">=&gt;</span> <span class="nn">Option</span><span class="p">::</span><span class="nf">Some</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">ZERO</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nn">Option</span><span class="p">::</span><span class="nf">Some</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">ZERO</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nn">Option</span><span class="p">::</span><span class="nf">Some</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">ZERO</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nn">Option</span><span class="p">::</span><span class="nf">Some</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">ONE</span><span class="p">)</span>  <span class="k">=&gt;</span> <span class="nn">Option</span><span class="p">::</span><span class="nf">Some</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">ONE</span><span class="p">)</span>  <span class="k">=&gt;</span> <span class="nn">Option</span><span class="p">::</span><span class="nf">Some</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
    <span class="mi">_</span> <span class="k">=&gt;</span> <span class="nn">Option</span><span class="p">::</span><span class="nb">None</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">const</span> <span class="n">START</span><span class="p">:</span> <span class="n">State</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">const</span> <span class="n">FINALS</span><span class="p">:</span> <span class="p">[</span><span class="n">State</span><span class="p">;</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">];</span>


<span class="k">const</span> <span class="n">INPUTS</span><span class="p">:</span> <span class="p">[</span><span class="n">Input</span><span class="p">;</span> <span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ONE</span><span class="p">,</span> <span class="n">ZERO</span><span class="p">,</span> <span class="n">ZERO</span><span class="p">,</span> <span class="n">ZERO</span><span class="p">,</span> <span class="n">ZERO</span><span class="p">,</span> <span class="n">ONE</span><span class="p">,</span> <span class="n">ONE</span><span class="p">];</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">let</span> <span class="k">mut</span> <span class="n">state</span> <span class="o">=</span> <span class="nn">Option</span><span class="p">::</span><span class="nf">Some</span><span class="p">(</span><span class="n">START</span><span class="p">);</span>
  <span class="k">for</span> <span class="n">input</span> <span class="n">in</span> <span class="n">INPUTS</span><span class="nf">.iter</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">state</span><span class="nf">.and_then</span><span class="p">(|</span><span class="n">st</span><span class="p">|</span> <span class="nf">transition</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="n">input</span><span class="nf">.clone</span><span class="p">()));</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="n">state</span><span class="nf">.map_or</span><span class="p">(</span><span class="k">false</span><span class="p">,</span> <span class="p">|</span><span class="n">st</span><span class="p">|</span> <span class="n">FINALS</span><span class="nf">.iter</span><span class="p">()</span><span class="nf">.any</span><span class="p">(|</span><span class="o">&amp;</span><span class="n">x</span><span class="p">|</span> <span class="n">x</span> <span class="o">==</span> <span class="n">st</span><span class="p">))</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"The input is accepted"</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"The input is not accepted"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<p>(The crate is in this <a href="https://github.com/Apanatshka/blog/tree/jekyll/_includes/compsci/2016/04/10/finite-automata/binary_string/">blog’s repository</a>)<br />
So <code class="language-plaintext highlighter-rouge">None</code> is the stuck state and the ‘real’ states are wrapped in a <code class="language-plaintext highlighter-rouge">Some</code>. In this code the transitions are given as a function, not a mapping. When you generalise this into an automaton library (there <a href="https://crates.io/search?q=automaton">are</a> <a href="https://crates.io/search?q=automata">several</a> on <a href="https://crates.io/">crates.io</a>), you’re more likely to end up with a map.</p>

<h3 id="memory">Memory</h3>

<p>Note that DFAs are so restricted that they don’t really have mutable memory. Any kind of memory of what you’ve already seen of the input needs to be statically encoded in the states of the state machine. This can get a little awkward when you want to recognise binary strings that have a 1 as the second to last symbol:</p>

<div class="graphviz-wrapper">

<!-- Generated by graphviz version 10.0.1 (0)
 -->
<!-- Title: Binary string DFA Pages: 1 -->
<svg role="img" aria-label="Binary string DFA" width="394pt" height="321pt" viewBox="0.00 0.00 393.54 321.46">
<title>Binary string DFA</title>
<desc>digraph &quot;Binary string DFA&quot; { 
layout=&quot;circo&quot;;
bgcolor=&quot;transparent&quot;;
rankdir=LR;
start [shape=none, label=&quot;&quot;, width=0];
node [shape=doublecircle, fixedsize=shape, width=0.4, mindist=2];
q100 [label=&quot;100&quot;];
q101 [label=&quot;101&quot;];
q110 [label=&quot;110&quot;];
q111 [label=&quot;111&quot;];
node [shape=circle, fixedsize=shape, width=0.5];
q000 [label=&quot;000&quot;];
q001 [label=&quot;001&quot;];
q010 [label=&quot;010&quot;];
q011 [label=&quot;011&quot;];
start -&gt; q000;
q000 -&gt; q000 [label=&quot;0&quot;];
q000 -&gt; q001 [label=&quot;1&quot;];
q001 -&gt; q010 [label=&quot;0&quot;];
q001 -&gt; q011 [label=&quot;1&quot;];
q010 -&gt; q100 [label=&quot;0&quot;];
q010 -&gt; q101 [label=&quot;1&quot;];
q011 -&gt; q110 [label=&quot;0&quot;];
q011 -&gt; q111 [label=&quot;1&quot;];
q100 -&gt; q000 [label=&quot;0&quot;];
q100 -&gt; q001 [label=&quot;1&quot;];
q101 -&gt; q010 [label=&quot;0&quot;];
q101 -&gt; q011 [label=&quot;1&quot;];
q110 -&gt; q100 [label=&quot;0&quot;];
q110 -&gt; q101 [label=&quot;1&quot;];
q111 -&gt; q110 [label=&quot;0&quot;];
q111 -&gt; q111 [label=&quot;1&quot;];
 }</desc>

<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 317.46)">
<title>Binary string DFA</title>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
</g>
<!-- q000 -->
<g id="node6" class="node">
<title>q000</title>
<ellipse fill="none" stroke="black" cx="90.36" cy="-156.93" rx="18" ry="18" />
<text text-anchor="middle" x="90.36" y="-151.88" font-family="Times,serif" font-size="14.00">000</text>
</g>
<!-- start&#45;&gt;q000 -->
<g id="edge1" class="edge">
<title>start&#45;&gt;q000</title>
<path fill="none" stroke="black" d="M0.62,-156.93C3.83,-156.93 36.27,-156.93 61.23,-156.93" />
<polygon fill="black" stroke="black" points="61.21,-160.43 71.21,-156.93 61.21,-153.43 61.21,-160.43" />
</g>
<!-- q100 -->
<g id="node2" class="node">
<title>q100</title>
<ellipse fill="none" stroke="black" cx="130.93" cy="-58.97" rx="14.4" ry="14.4" />
<ellipse fill="none" stroke="black" cx="130.93" cy="-58.97" rx="18.4" ry="18.4" />
<text text-anchor="middle" x="130.93" y="-53.92" font-family="Times,serif" font-size="14.00">100</text>
</g>
<!-- q100&#45;&gt;q000 -->
<g id="edge10" class="edge">
<title>q100&#45;&gt;q000</title>
<path fill="none" stroke="black" d="M124.05,-75.59C117.84,-90.6 108.58,-112.94 101.34,-130.42" />
<polygon fill="black" stroke="black" points="98.31,-128.58 97.72,-139.16 104.78,-131.26 98.31,-128.58" />
<text text-anchor="middle" x="109.32" y="-106.2" font-family="Times,serif" font-size="14.00">0</text>
</g>
<!-- q001 -->
<g id="node7" class="node">
<title>q001</title>
<ellipse fill="none" stroke="black" cx="130.93" cy="-254.88" rx="18" ry="18" />
<text text-anchor="middle" x="130.93" y="-249.83" font-family="Times,serif" font-size="14.00">001</text>
</g>
<!-- q100&#45;&gt;q001 -->
<g id="edge11" class="edge">
<title>q100&#45;&gt;q001</title>
<path fill="none" stroke="black" d="M130.93,-77.05C130.93,-111.03 130.93,-184.7 130.93,-225.75" />
<polygon fill="black" stroke="black" points="127.43,-225.62 130.93,-235.62 134.43,-225.62 127.43,-225.62" />
<text text-anchor="middle" x="134.31" y="-138.1" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- q101 -->
<g id="node3" class="node">
<title>q101</title>
<ellipse fill="none" stroke="black" cx="326.84" cy="-254.88" rx="14.4" ry="14.4" />
<ellipse fill="none" stroke="black" cx="326.84" cy="-254.88" rx="18.4" ry="18.4" />
<text text-anchor="middle" x="326.84" y="-249.83" font-family="Times,serif" font-size="14.00">101</text>
</g>
<!-- q010 -->
<g id="node8" class="node">
<title>q010</title>
<ellipse fill="none" stroke="black" cx="228.89" cy="-295.46" rx="18" ry="18" />
<text text-anchor="middle" x="228.89" y="-290.41" font-family="Times,serif" font-size="14.00">010</text>
</g>
<!-- q101&#45;&gt;q010 -->
<g id="edge12" class="edge">
<title>q101&#45;&gt;q010</title>
<path fill="none" stroke="black" d="M308.69,-256.81C292.9,-261.45 269.95,-270.64 252.69,-279.05" />
<polygon fill="black" stroke="black" points="251.43,-275.76 244.14,-283.45 254.64,-281.98 251.43,-275.76" />
<text text-anchor="middle" x="277.32" y="-254.63" font-family="Times,serif" font-size="14.00">0</text>
</g>
<!-- q011 -->
<g id="node9" class="node">
<title>q011</title>
<ellipse fill="none" stroke="black" cx="367.42" cy="-156.93" rx="18" ry="18" />
<text text-anchor="middle" x="367.42" y="-151.88" font-family="Times,serif" font-size="14.00">011</text>
</g>
<!-- q101&#45;&gt;q011 -->
<g id="edge13" class="edge">
<title>q101&#45;&gt;q011</title>
<path fill="none" stroke="black" d="M333.73,-238.27C339.94,-223.26 349.2,-200.92 356.43,-183.44" />
<polygon fill="black" stroke="black" points="359.46,-185.28 360.06,-174.7 353,-182.6 359.46,-185.28" />
<text text-anchor="middle" x="341.71" y="-214.05" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- q110 -->
<g id="node4" class="node">
<title>q110</title>
<ellipse fill="none" stroke="black" cx="228.89" cy="-18.4" rx="14.4" ry="14.4" />
<ellipse fill="none" stroke="black" cx="228.89" cy="-18.4" rx="18.4" ry="18.4" />
<text text-anchor="middle" x="228.89" y="-13.35" font-family="Times,serif" font-size="14.00">110</text>
</g>
<!-- q110&#45;&gt;q100 -->
<g id="edge14" class="edge">
<title>q110&#45;&gt;q100</title>
<path fill="none" stroke="black" d="M212.27,-25.28C197.5,-31.4 175.61,-40.47 158.26,-47.66" />
<polygon fill="black" stroke="black" points="156.93,-44.42 149.03,-51.48 159.61,-50.88 156.93,-44.42" />
<text text-anchor="middle" x="181.89" y="-39.67" font-family="Times,serif" font-size="14.00">0</text>
</g>
<!-- q110&#45;&gt;q101 -->
<g id="edge15" class="edge">
<title>q110&#45;&gt;q101</title>
<path fill="none" stroke="black" d="M235.78,-35.03C252.42,-75.21 294.97,-177.93 315.47,-227.41" />
<polygon fill="black" stroke="black" points="312.19,-228.66 319.25,-236.56 318.66,-225.98 312.19,-228.66" />
<text text-anchor="middle" x="272.25" y="-134.42" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- q111 -->
<g id="node5" class="node">
<title>q111</title>
<ellipse fill="none" stroke="black" cx="326.84" cy="-58.97" rx="14.4" ry="14.4" />
<ellipse fill="none" stroke="black" cx="326.84" cy="-58.97" rx="18.4" ry="18.4" />
<text text-anchor="middle" x="326.84" y="-53.92" font-family="Times,serif" font-size="14.00">111</text>
</g>
<!-- q111&#45;&gt;q110 -->
<g id="edge16" class="edge">
<title>q111&#45;&gt;q110</title>
<path fill="none" stroke="black" d="M310.23,-52.09C295.45,-45.97 273.56,-36.9 256.21,-29.72" />
<polygon fill="black" stroke="black" points="257.56,-26.49 246.98,-25.9 254.88,-32.96 257.56,-26.49" />
<text text-anchor="middle" x="279.84" y="-44.1" font-family="Times,serif" font-size="14.00">0</text>
</g>
<!-- q111&#45;&gt;q111 -->
<g id="edge17" class="edge">
<title>q111&#45;&gt;q111</title>
<path fill="none" stroke="black" d="M344.07,-65.35C354,-66.66 363.24,-64.53 363.24,-58.97 363.24,-55.68 359.98,-53.59 355.26,-52.71" />
<polygon fill="black" stroke="black" points="355.62,-49.21 345.58,-52.61 355.55,-56.21 355.62,-49.21" />
<text text-anchor="middle" x="366.62" y="-53.92" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- q000&#45;&gt;q000 -->
<g id="edge2" class="edge">
<title>q000&#45;&gt;q000</title>
<path fill="none" stroke="black" d="M107.08,-163.26C117.08,-164.66 126.49,-162.55 126.49,-156.93 126.49,-153.59 123.17,-151.49 118.38,-150.63" />
<polygon fill="black" stroke="black" points="118.6,-147.13 108.6,-150.6 118.59,-154.13 118.6,-147.13" />
<text text-anchor="middle" x="129.86" y="-151.88" font-family="Times,serif" font-size="14.00">0</text>
</g>
<!-- q000&#45;&gt;q001 -->
<g id="edge3" class="edge">
<title>q000&#45;&gt;q001</title>
<path fill="none" stroke="black" d="M97.24,-173.55C103.46,-188.55 112.71,-210.9 119.95,-228.37" />
<polygon fill="black" stroke="black" points="116.51,-229.21 123.57,-237.11 122.98,-226.54 116.51,-229.21" />
<text text-anchor="middle" x="105.22" y="-204.16" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- q001&#45;&gt;q010 -->
<g id="edge4" class="edge">
<title>q001&#45;&gt;q010</title>
<path fill="none" stroke="black" d="M147.55,-261.77C162.56,-267.98 184.9,-277.24 202.38,-284.47" />
<polygon fill="black" stroke="black" points="200.54,-287.5 211.12,-288.1 203.22,-281.04 200.54,-287.5" />
<text text-anchor="middle" x="171.59" y="-276.32" font-family="Times,serif" font-size="14.00">0</text>
</g>
<!-- q001&#45;&gt;q011 -->
<g id="edge5" class="edge">
<title>q001&#45;&gt;q011</title>
<path fill="none" stroke="black" d="M147.56,-247.99C187.85,-231.31 290.96,-188.6 340.31,-168.16" />
<polygon fill="black" stroke="black" points="341.51,-171.45 349.41,-164.39 338.83,-164.98 341.51,-171.45" />
<text text-anchor="middle" x="240.56" y="-211.28" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- q010&#45;&gt;q100 -->
<g id="edge6" class="edge">
<title>q010&#45;&gt;q100</title>
<path fill="none" stroke="black" d="M222,-278.83C205.36,-238.64 162.81,-135.93 142.31,-86.44" />
<polygon fill="black" stroke="black" points="145.59,-85.2 138.52,-77.3 139.12,-87.88 145.59,-85.2" />
<text text-anchor="middle" x="178.78" y="-185.83" font-family="Times,serif" font-size="14.00">0</text>
</g>
<!-- q010&#45;&gt;q101 -->
<g id="edge7" class="edge">
<title>q010&#45;&gt;q101</title>
<path fill="none" stroke="black" d="M246.58,-293.66C262.32,-289.09 285.41,-279.87 302.81,-271.4" />
<polygon fill="black" stroke="black" points="304.15,-274.65 311.44,-266.97 300.95,-268.42 304.15,-274.65" />
<text text-anchor="middle" x="271.32" y="-285.73" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- q011&#45;&gt;q110 -->
<g id="edge8" class="edge">
<title>q011&#45;&gt;q110</title>
<path fill="none" stroke="black" d="M355.12,-144.63C331.38,-120.89 278.97,-68.48 249.7,-39.21" />
<polygon fill="black" stroke="black" points="252.37,-36.93 242.83,-32.34 247.42,-41.88 252.37,-36.93" />
<text text-anchor="middle" x="299.04" y="-95.12" font-family="Times,serif" font-size="14.00">0</text>
</g>
<!-- q011&#45;&gt;q111 -->
<g id="edge9" class="edge">
<title>q011&#45;&gt;q111</title>
<path fill="none" stroke="black" d="M360.53,-140.31C354.41,-125.54 345.35,-103.65 338.16,-86.3" />
<polygon fill="black" stroke="black" points="341.4,-84.97 334.34,-77.07 334.93,-87.65 341.4,-84.97" />
<text text-anchor="middle" x="345.97" y="-116.5" font-family="Times,serif" font-size="14.00">1</text>
</g>
</g>
</svg>
</div>

<p>We remember the last three input symbols in our states. That gives us <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">2^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span> states, an exponential relation. So with these kinds of problems, you really don’t want to design these DFAs by hand.</p>

<h2 id="non-deterministic-finite-automaton-nfa">Non-deterministic Finite Automaton (NFA)</h2>

<p>Non-determinism allows states to have multiple transitions per symbol. That means that when you simulate an NFA, you can be in multiple states at once. This allows us to avoid the exponential blowup of the last example:</p>

<div class="graphviz-wrapper">

<!-- Generated by graphviz version 10.0.1 (0)
 -->
<!-- Title: Binary string DFA Pages: 1 -->
<svg role="img" aria-label="Binary string DFA" width="340pt" height="79pt" viewBox="0.00 0.00 339.77 78.90">
<title>Binary string DFA</title>
<desc>digraph &quot;Binary string DFA&quot; { 
bgcolor=&quot;transparent&quot;;
rankdir=LR;
start [shape=none, label=&quot;&quot;, width=0];
node [shape=doublecircle, fixedsize=shape, width=0.4, mindist=2];
q4 [label=&quot;1..&quot;];
node [shape=circle, fixedsize=shape, width=0.5];
q1 [label=&quot;...&quot;];
q2 [label=&quot;..1&quot;];
q3 [label=&quot;.1.&quot;];
start -&gt; q1;
q1 -&gt; q1 [label=&quot;0,1&quot;];
q1 -&gt; q2 [label=&quot;1&quot;];
q2 -&gt; q3 [label=&quot;0,1&quot;];
q3 -&gt; q4 [label=&quot;0,1&quot;];
 }</desc>

<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 74.9)">
<title>Binary string DFA</title>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
</g>
<!-- q1 -->
<g id="node3" class="node">
<title>q1</title>
<ellipse fill="none" stroke="black" cx="55.72" cy="-18.4" rx="18" ry="18" />
<text text-anchor="middle" x="55.72" y="-13.35" font-family="Times,serif" font-size="14.00">...</text>
</g>
<!-- start&#45;&gt;q1 -->
<g id="edge1" class="edge">
<title>start&#45;&gt;q1</title>
<path fill="none" stroke="black" d="M0.87,-18.4C2.36,-18.4 14.23,-18.4 26.45,-18.4" />
<polygon fill="black" stroke="black" points="26.44,-21.9 36.43,-18.4 26.43,-14.9 26.44,-21.9" />
</g>
<!-- q4 -->
<g id="node2" class="node">
<title>q4</title>
<ellipse fill="none" stroke="black" cx="313.37" cy="-18.4" rx="14.4" ry="14.4" />
<ellipse fill="none" stroke="black" cx="313.37" cy="-18.4" rx="18.4" ry="18.4" />
<text text-anchor="middle" x="313.37" y="-13.35" font-family="Times,serif" font-size="14.00">1..</text>
</g>
<!-- q1&#45;&gt;q1 -->
<g id="edge2" class="edge">
<title>q1&#45;&gt;q1</title>
<path fill="none" stroke="black" d="M49.3,-35.06C47.88,-45.02 50.02,-54.4 55.72,-54.4 59.11,-54.4 61.24,-51.09 62.11,-46.32" />
<polygon fill="black" stroke="black" points="65.61,-46.59 62.13,-36.58 58.61,-46.57 65.61,-46.59" />
<text text-anchor="middle" x="55.72" y="-57.6" font-family="Times,serif" font-size="14.00">0,1</text>
</g>
<!-- q2 -->
<g id="node4" class="node">
<title>q2</title>
<ellipse fill="none" stroke="black" cx="134.47" cy="-18.4" rx="18" ry="18" />
<text text-anchor="middle" x="134.47" y="-13.35" font-family="Times,serif" font-size="14.00">..1</text>
</g>
<!-- q1&#45;&gt;q2 -->
<g id="edge3" class="edge">
<title>q1&#45;&gt;q2</title>
<path fill="none" stroke="black" d="M73.37,-18.4C82.66,-18.4 94.48,-18.4 105.18,-18.4" />
<polygon fill="black" stroke="black" points="105.07,-21.9 115.07,-18.4 105.07,-14.9 105.07,-21.9" />
<text text-anchor="middle" x="95.1" y="-21.6" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- q3 -->
<g id="node5" class="node">
<title>q3</title>
<ellipse fill="none" stroke="black" cx="223.72" cy="-18.4" rx="18" ry="18" />
<text text-anchor="middle" x="223.72" y="-13.35" font-family="Times,serif" font-size="14.00">.1.</text>
</g>
<!-- q2&#45;&gt;q3 -->
<g id="edge4" class="edge">
<title>q2&#45;&gt;q3</title>
<path fill="none" stroke="black" d="M152.29,-18.4C164.24,-18.4 180.57,-18.4 194.5,-18.4" />
<polygon fill="black" stroke="black" points="194.44,-21.9 204.44,-18.4 194.44,-14.9 194.44,-21.9" />
<text text-anchor="middle" x="179.1" y="-21.6" font-family="Times,serif" font-size="14.00">0,1</text>
</g>
<!-- q3&#45;&gt;q4 -->
<g id="edge5" class="edge">
<title>q3&#45;&gt;q4</title>
<path fill="none" stroke="black" d="M241.62,-18.4C253.55,-18.4 269.82,-18.4 283.75,-18.4" />
<polygon fill="black" stroke="black" points="283.71,-21.9 293.71,-18.4 283.71,-14.9 283.71,-21.9" />
<text text-anchor="middle" x="268.35" y="-21.6" font-family="Times,serif" font-size="14.00">0,1</text>
</g>
</g>
</svg>
</div>

<p>Although this NFA is easier to describe, it’s still always translatable to a DFA. This translation algorithm is called powerset construction or subset construction. The powerset of a set is the set of all combinations: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">P</mi><mo stretchy="false">(</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mi mathvariant="normal">∅</mi><mo separator="true">,</mo><mo stretchy="false">{</mo><mn>0</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mo stretchy="false">{</mo><mn>1</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\mathbb{P}(\{0,1\}) = \{\emptyset, \{0\}, \{1\}, \{0,1\}\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">P</span><span class="mopen">({</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">})</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">∅</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">{</span><span class="mord">1</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">}}</span></span></span></span></p>

<h3 id="powerset-construction">Powerset construction</h3>

<ol>
  <li>The <em>alphabet</em> stays the same.</li>
  <li>We use the powerset of the states of the NFA to create the states for the DFA. (That’s where the exponential blowup comes from, <strong>if</strong> all those states are used.) The state with the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">\emptyset</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">∅</span></span></span></span> is the <em>stuck state</em> that we already saw earlier.</li>
  <li>The transitions are based on the simulation of the NFA. So if you are in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><msub><mi>q</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>q</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>q</mi><mn>3</mn></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{q_0, q_1, q_3\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span> then the transition with symbol <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\sigma_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> takes you to the state in the DFA that is labelled with states of the NFA that are reachable with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\sigma_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> from the states <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">q_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">q_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">q_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>.</li>
  <li>The start state is still the same although now called <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><msub><mi>q</mi><mi>o</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{q_o\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">o</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span> instead of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mi>o</mi></msub></mrow><annotation encoding="application/x-tex">q_o</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">o</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>.</li>
  <li>The final states are every state that has an NFA final state in its set.</li>
</ol>

<h3 id="epsilon-moves">Epsilon moves</h3>

<p>The empty string is referred to with the greek letter <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>. If you allow transitions in an NFA to be labelled with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>, you get the NFA-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span> type of automata. This changes the powerset construction slightly, because an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span> move from the start state in the NFA <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">q_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> means that the start state of the DFA will be one of the compound states <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><msub><mi>q</mi><mn>0</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{q_0, ...\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">…</span><span class="mclose">}</span></span></span></span>. This class of automata is still not more powerful than the NFA or DFA. But it <em>is</em> useful for the definition of the basic regular expression operators.</p>

<h3 id="regular-expressions">Regular expressions</h3>

<p>Now just to warn you: regular expressions in programming were once based on this automata theory, but have since been made much more powerful. Regex can describe much more than just <em>regular</em> languages.</p>

<p><strong>The basics</strong> Ok, say you have an empty regular expression. That’s an NFA with one state, the start state, which is also a final state. It only recognises <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>.<br />
A regular expression that matches exactly <code class="language-plaintext highlighter-rouge">1</code> is the same as an NFA with two states, the start state, and a separate final state with a transition in between labelled with <code class="language-plaintext highlighter-rouge">1</code>.</p>

<p><strong>Option</strong> Let’s take two regular expressions put an ‘or’ (<code class="language-plaintext highlighter-rouge">|</code>) in between. If either one matches, the whole regex matches. If we have two NFA equivalents, we can make a new start state and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>-transitions to the two old start states.</p>

<p><strong>Concatenation</strong> Let’s take two regular expressions and stick them together, one after the other. In NFA-land that means that the final states of the first NFA become normal states with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>-transitions to the start state of the second NFA.</p>

<p><strong>Kleene Star</strong> This is the <code class="language-plaintext highlighter-rouge">*</code> in a regular expression, a zero-or-more. With this and the option, you can make a one-or-more (<code class="language-plaintext highlighter-rouge">+</code>). The way this works in NFA-land is as follows: Create a new start state, which is a final state, and give it an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>-transition to the old start state (the zero part). Give the old final states <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>-transitions to the old start state (the more part).</p>

<h2 id="limitations-and-non-regular-languages">Limitations and Non-regular languages</h2>

<p>Say you want to recognise binary strings that starts with any number of zeroes, but then is followed by an equal number of ones. Because the number of zeroes is unbounded, we cannot use a finite number of states to count how many zeroes we’ve seen so far, to match with the amount of ones to come. Basically, it’s impossible to use DFAs or NFAs to recognise ‘words’ of this language.</p>

<p>More generally you can prove languages non-regular with the <a href="https://en.wikipedia.org/wiki/Pumping_lemma_for_regular_languages">pumping lemma for regular languages</a>. I don’t have a super-intuitive way of explaining the pumping lemma, so if you want to know more, try reading the theory on it. <em>(Or do I? See the <a href="#addendum">Addendum</a>!)</em></p>

<h1 id="ps">P.S.</h1>

<p>Next blog post we’ll look at context-free languages, which is a superset of the regular languages. They can be described with context-free grammars (which you may know from the definitions of programming language syntax) and which you can recognise with an automaton that has a single stack for memory.</p>

<p>I was going to write some more Rust code for you to look at, like a generally usable automaton library and the powerset construction. But this post has taken so long, it is already long, and there are Rust crates available with that kind of stuff… So, whatever ¯\_(ツ)_/¯</p>

<hr />

<hr />

<h1 id="addendum">Addendum</h1>

<p><em>Apr 17, 2016</em></p>

<h2 id="non-regularity-and-the-pumping-lemma">Non-regularity and the pumping lemma</h2>

<p>Most of the examples I’ve seen of non-regular languages have some form of unbounded counting in them. But if you have a different language that doesn’t seem to fit, you can try to prove it non-regular too. The usual way to prove that a language is not regular, is to show that the <a href="https://en.wikipedia.org/wiki/Pumping_lemma_for_regular_languages">pumping lemma for regular languages</a> doesn’t hold for the language. The pumping lemma is a property that all regular languages have (though there are some non-regular languages which are have this property). The basic idea is this:</p>

<ol>
  <li>Your language either consists of a finite set of words, and is therefore regular, or it consists of an infinite set. (The finite set means you can just union the DFAs for every separate word. )</li>
  <li>With an infinite set of words, and a finite alphabet, you’ll have words that have more symbols in them than your language’s DFA has states. That means the DFA has to loop somewhere.</li>
  <li>Every word in your language that is longer and uses a loop has three parts: the part before the loop, the part in the loop and the part after the loop. Such a word is part of an infinite class of words where you can repeat the middle part however many times you like.</li>
</ol>

<p>To prove that a language doesn’t have this <em>pumping length</em> from the lemma, you need to be pretty abstract and use a cleverly chosen word. So if you want to write such a proof and haven’t done it before, I advise you to look up some examples!</p>

<p><em>Thanks to <a href="https://www.reddit.com/user/so_you_like_donuts">/u/so_you_like_donuts</a> for giving an <a href="https://www.reddit.com/r/rust/comments/4eq01l/my_first_blog_post_finite_automata_with_a_bit_of/d22bw6q?context=3">intuitive description of the pumping lemma</a> which drove me to write this addendum.</em></p>

<h2 id="next-post">Next post</h2>

<p>I had another week to read other blog posts, including an excellent one about <a href="http://blog.burntsushi.net/transducers/">automata in rust for string indexes</a> and now I feel bad for not giving you the Rust code for every algorithm I explained. So, I might just postpone the blog post about context-free languages and dive into regex first. I doubt I’ll do better than the existing <a href="https://crates.io/crates/regex">regex crate</a>, but, you know, whatever ¯\_(ツ)_/¯</p>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Whatever</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li><a href="mailto:mail [at] this domain">mail [at] this domain</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/Apanatshka">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">Apanatshka</span>
            </a>
          </li>
          

          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">A web log. Mostly about computer science-y stuff. 
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
